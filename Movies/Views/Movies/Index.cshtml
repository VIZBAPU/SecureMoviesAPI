@model IEnumerable<Movies.Models.Movie>
@{
    ViewData["Title"] = "Anime Movie List";
}

<h1> Anime Movie list</h1>

<div class="row mb-3">
    <div class="col-md-12">
        <div class="btn-group" role="group">
            <span class="me-2 align-middle" style="line-height: 38px;">Sort by:</span>
            <a asp-action="Index" asp-route-sortBy="rating" class="btn btn-outline-primary @(ViewBag.SortBy == "rating" ? "active" : "")">
                Rating (High to Low)
            </a>
            <a asp-action="Index" asp-route-sortBy="rating_asc" class="btn btn-outline-primary @(ViewBag.SortBy == "rating_asc" ? "active" : "")">
                Rating (Low to High)
            </a>
            <a asp-action="Index" asp-route-sortBy="year" class="btn btn-outline-primary @(ViewBag.SortBy == "year" ? "active" : "")">
                Year (Newest First)
            </a>
            <a asp-action="Index" asp-route-sortBy="year_asc" class="btn btn-outline-primary @(ViewBag.SortBy == "year_asc" ? "active" : "")">
                Year (Oldest First)
            </a>
            <a asp-action="Index" asp-route-sortBy="title" class="btn btn-outline-primary @(ViewBag.SortBy == "title" ? "active" : "")">
                Title (A-Z)
            </a>
            <a asp-action="Index" asp-route-sortBy="title_desc" class="btn btn-outline-primary @(ViewBag.SortBy == "title_desc" ? "active" : "")">
                Title (Z-A)
            </a>
            <a asp-action="Index" class="btn btn-outline-secondary">
                Reset
            </a>
        </div>
    </div>
</div>

<p>
    <a asp-action="Create" class="btn btn-primary">Add New Movie</a>
</p>

<table class="table table-striped table-hover">
    <thead class="table-dark">
        <tr>
            <th>Title</th>
            <th>Director</th>
            <th>Genre</th>
            <th>Year</th>
            <th>Rating</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>@Html.DisplayFor(modelItem => item.Title)</td>
                <td>@Html.DisplayFor(modelItem => item.Director)</td>
                <td>@Html.DisplayFor(modelItem => item.Genre)</td>
                <td>@Html.DisplayFor(modelItem => item.ReleaseYear)</td>
                <td>
                    <span class="badge bg-success">@Html.DisplayFor(modelItem => item.Rating)</span>
                </td>
                <td>
                    <a asp-action="Edit" asp-route-id="@item.Id" class="btn btn-warning btn-sm">Edit</a>
                    <a asp-action="Delete" asp-route-id="@item.Id" class="btn btn-danger btn-sm">Delete</a>
                </td>
            </tr>
        }
    </tbody>
</table>

@if (ViewBag.SortBy != null)
{
    <div class="alert alert-info mt-3">
        <strong>Sorted by:</strong>
        @switch (ViewBag.SortBy)
        {
            case "rating":
                <text>Rating (High to Low)</text>
                break;
            case "rating_asc":
                <text>Rating (Low to High)</text>
                break;
            case "year":
                <text>Release Year (Newest First)</text>
                break;
            case "year_asc":
                <text>Release Year (Oldest First)</text>
                break;
            case "title":
                <text>Title (A-Z)</text>
                break;
            case "title_desc":
                <text>Title (Z-A)</text>
                break;
            default:
                <text>Default Order</text>
                break;
        }
    </div>
}